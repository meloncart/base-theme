##
url = "/shop/category/:fullslug*?/:baseid?"
layout = "default"
title = "Shop Category"
meta_title = "{{ category.name }}"

[cart]
[catalog]
lookup = "category"
identifier = "baseid"

[resources]
css[] = "pages/category.css"
vars[activeNavLink] = 'shop'
==
{% if not category %}
    {% do abort(404) %}
{% elseif category.fullslug and category.fullslug != this.param.fullslug %}
    {% do redirect(this|page({ fullslug: category.fullslug }), 301) %}
{% endif %}

{% set subcategories = category.children %}

<div class="container container-padded">
    <div class="mb-4">
        {% partial 'shop/breadcrumb' object=category %}
    </div>

    <div class="row gx-10">
        <aside class="col-lg-3 col-md-4 mb-6 mb-md-0">
            {% partial 'shop-category/sidebar-categories' %}
            {% partial 'shop-category/sidebar-manufacturers' %}
            {% partial 'shop-category/sidebar-price' %}
            {% partial 'shop-category/sidebar-rating' %}
        </aside>
        <section class="col-lg-9 col-md-8">
            <div class="card category-header mb-4">
                <div class="card-body p-9">
                    <h1 class="mb-0 fs-1">
                        {{ category.title ? category.title : category.name }}
                    </h1>
                </div>
            </div>

            {% if category.short_description %}
                <p>{{ category.short_description }}</p>
            {% endif %}

            <div id="categoryProducts">
                {% ajaxPartial 'shop-category/category-products' %}
            </div>
        </section>
    </div>
</div>
